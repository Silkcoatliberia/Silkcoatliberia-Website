// ===== NEWS DATA ===== //
const newsData = [
    {
        id: 1,
        title: "Historic Certification Ceremony Celebrates New Generation of Paint Professionals",
        excerpt: "Silkcoat Liberia CEO Miss Helena Smith and government officials honor newly certified painters at grand ceremony, marking successful completion of intensive Turkish-led training program that sets new standards for Liberia's construction industry.",
        category: "Certification Ceremony",
        date: "2025-10-04",
        images: [
            "images/news/news5/day5_1.jpeg",
            "images/news/news5/day5_2.jpeg",
            "images/news/news5/day5_3.jpeg",
            "images/news/news5/day5_4.jpeg", 
            "images/news/news5/day5_5.jpeg",
            "images/news/news5/day5_6.jpeg",
            "images/news/news5/day5_7.jpeg",
            "images/news/news5/day5_8.jpeg",
            "images/news/news5/day5_9.jpeg"
        ],
        content: `
            <p>In a landmark event for Liberia's construction sector, Silkcoat Liberia hosted a prestigious certification ceremony on October 4th, celebrating the successful completion of its intensive five-day professional training program. The ceremony, attended by government officials and industry leaders, recognized a new generation of internationally certified paint application professionals.</p>
            
            <h4>Expert-Led Training Program</h4>
            <p>The comprehensive five-day training program featured:</p>
            <ul>
                <li>Hands-on technical training led by certified Turkish paint application specialists</li>
                <li>Advanced surface preparation techniques for Liberia's tropical climate</li>
                <li>Product knowledge sessions covering Silkcoat's entire paint range</li>
                <li>Best practices in color consultation and customer service</li>
                <li>Safety protocols and environmental compliance standards</li>
            </ul>
            
            <h4>Building Local Expertise</h4>
            <p>The workshop brought together Silkcoat's dedicated staff members and experienced local painters from across Monrovia. This knowledge transfer initiative aims to create a network of certified professionals who can deliver world-class paint application services throughout Liberia.</p>
            
            <p>"We're investing in people, not just products," explained CEO Miss Helena Smith during her address. "By sharing our expertise and international standards, we're helping build Liberia's capacity for excellence in the construction sector and creating opportunities for professional growth."</p>
            
            <h4>Comprehensive Five-Day Curriculum</h4>
            <p>The intensive program covered multiple critical areas:</p>
            <ul>
                <li>Day 1 (September 30): Surface analysis, preparation techniques, and primer application fundamentals</li>
                <li>Day 2 (October 1): Advanced application methods for decorative and specialty paints</li>
                <li>Day 3 (October 2): Problem-solving, quality control, and troubleshooting techniques</li>
                <li>Day 4 (October 3): Customer consultation skills and professional business practices</li>
                <li>Day 5 (October 4): Practical assessment and certification ceremony</li>
            </ul>
            
            <h4>Impact on Local Industry</h4>
            <p>This training initiative is expected to significantly impact Liberia's painting industry by establishing standardized quality benchmarks and professional practices. Participants received internationally recognized certification upon successful completion of the rigorous program.</p>
            
            <p>The workshop emphasized practical, hands-on learning with real-world applications specific to Liberian building materials and environmental conditions. Participants gained skills that will immediately enhance their professional capabilities and career prospects.</p>
            
            <h4>Ceremony Highlights</h4>
            <p>The certification ceremony featured addresses from Miss Helena Smith, CEO of Silkcoat Liberia, and distinguished government officials, recognizing the importance of professional skill development in Liberia's economic growth and construction sector advancement.</p>
            
            <p>Each certified participant received an official certificate, professional toolkit, and ongoing support resources to help them continue their professional development journey.</p>
            
            <h4>Looking Forward</h4>
            <p>Silkcoat Liberia plans to make this training program an annual event, continuously updating local professionals with the latest techniques, products, and industry best practices. This commitment to ongoing education demonstrates the company's long-term investment in Liberia's development.</p>
            
            <p>"This is just the beginning," Miss Helena Smith concluded. "We're committed to supporting these certified professionals as they grow their businesses and raise the standards of painting services across Liberia."</p>
        `
    },
    {
        id: 2,
        title: "Professional Standards Workshop Concludes Fourth Day of Training",
        excerpt: "Day four of Silkcoat training focuses on customer consultation, business ethics, and professional practices as participants prepare for final certification on October 4th.",
        category: "Training & Development",
        date: "2025-10-03",
        images: [
            "images/news/news4/day4_1.png",
            "images/news/news4/day4_2.png",
            "images/news/news4/day4_3.png",
            "images/news/news4/day4_4.jpeg"
        ],
        content: `
            <p>As the fourth day of Silkcoat Liberia's intensive training workshop concluded on October 3rd, participants demonstrated remarkable growth in their professional skills and business acumen. Turkish experts led comprehensive sessions focused on customer service, professional standards, and business practices that will distinguish certified Silkcoat professionals in the marketplace.</p>
            
            <h4>Professional Standards and Ethics</h4>
            <p>Today's advanced training covered critical professional development areas:</p>
            <ul>
                <li>Effective customer communication and expectation management</li>
                <li>Accurate project estimation and transparent pricing strategies</li>
                <li>Professional conduct and business ethics in the painting industry</li>
                <li>Building long-term customer relationships through quality service</li>
                <li>Portfolio development and business marketing strategies</li>
            </ul>
            
            <h4>Customer Consultation Skills</h4>
            <p>A significant portion of today's program focused on mastering customer interactions. Participants engaged in practical exercises including:</p>
            <ul>
                <li>Color consultation and recommendation techniques</li>
                <li>Understanding customer needs and translating vision into reality</li>
                <li>Presenting product options and explaining benefits clearly</li>
                <li>Managing project timelines and customer expectations</li>
                <li>Handling concerns and providing professional solutions</li>
            </ul>
            
            <h4>Business Development Training</h4>
            <p>The afternoon session covered essential business skills for painting professionals:</p>
            <ul>
                <li>Pricing strategies for different types of painting projects</li>
                <li>Material calculation and cost estimation methods</li>
                <li>Creating professional quotes and proposals</li>
                <li>Time management and project scheduling</li>
                <li>Growing and managing a painting business successfully</li>
            </ul>
            
            <h4>Quality Assurance and Guarantees</h4>
            <p>Participants learned about professional liability and quality standards:</p>
            <ul>
                <li>Setting quality benchmarks for different project types</li>
                <li>Warranty and guarantee protocols for painted surfaces</li>
                <li>Documentation and record-keeping best practices</li>
                <li>Follow-up services and customer satisfaction assurance</li>
            </ul>
            
            <h4>Participant Reflections</h4>
            <p>Participants expressed enthusiasm about the comprehensive nature of the training program. One local painter noted, "These four days have completely transformed my understanding of professional painting. It's not just about applying paint anymore â€“ it's about providing complete professional service and building a sustainable business."</p>
            
            <p>A Silkcoat staff member added, "The customer service training today was invaluable. We now have the confidence and knowledge to guide customers through their entire paint selection and application journey."</p>
            
            <h4>Preparation for Certification</h4>
            <p>As the training sessions concluded, participants received information about tomorrow's certification process. The final day will include practical assessments and the official certification ceremony where participants will receive their certificates and be recognized for their achievement.</p>
            
            <p>The certification ceremony on October 4th will feature addresses from Silkcoat Liberia's CEO Miss Helena Smith and distinguished guests, marking the successful completion of this groundbreaking professional development initiative.</p>
        `
    },
    {
        id: 3,
        title: "Advanced Problem-Solving Workshop Highlights Day Three of Training",
        excerpt: "Silkcoat training participants master quality control techniques and professional troubleshooting methods during the third day of intensive workshop.",
        category: "Training & Development",
        date: "2025-10-02",
        images: [
            "images/news/news3/day3_1.png",
            "images/news/news3/day3_2.png",
            "images/news/news3/day3_3.jpeg",
            "images/news/news3/day3_4.png",
            "images/news/news3/day3_5.png"
        ],
        content: `
            <p>The third day of Silkcoat Liberia's intensive training workshop on October 2nd focused on advanced problem-solving and quality control. Turkish experts led comprehensive sessions designed to equip participants with the skills needed to diagnose and resolve common painting challenges specific to Liberia's tropical environment.</p>
            
            <h4>Mastering Quality Control</h4>
            <p>Today's training covered critical quality management areas:</p>
            <ul>
                <li>Surface inspection and assessment protocols before application</li>
                <li>Paint consistency testing and adjustment techniques</li>
                <li>Application quality checkpoints and verification methods</li>
                <li>Final inspection criteria and standards</li>
                <li>Documentation and quality assurance procedures</li>
            </ul>
            
            <h4>Real-World Problem Solving</h4>
            <p>Participants engaged in intensive troubleshooting exercises addressing common challenges encountered in Liberia's construction environment. Training experts presented practical case studies from various climates and building types, challenging participants to diagnose issues and propose effective solutions.</p>
            
            <h5>Critical Issues Addressed:</h5>
            <ul>
                <li>Dealing with moisture-related paint failures in tropical climates</li>
                <li>Correcting surface preparation deficiencies during projects</li>
                <li>Managing color consistency across large applications</li>
                <li>Addressing finish quality concerns professionally</li>
                <li>Remediation strategies for previously failed paint applications</li>
            </ul>
            
            <h4>Climate-Specific Challenges</h4>
            <p>A significant portion of training addressed Liberia's unique environmental conditions:</p>
            <ul>
                <li>Managing humidity levels during paint application and curing</li>
                <li>Temperature control strategies for optimal results</li>
                <li>Mold and mildew prevention in high-moisture areas</li>
                <li>UV protection and fade resistance in intense tropical sun</li>
                <li>Seasonal considerations for exterior painting projects</li>
            </ul>
            
            <h4>Hands-On Practice Sessions</h4>
            <p>The afternoon featured practical exercises where participants worked through common scenarios, applying learned troubleshooting techniques. Turkish trainers provided individualized feedback and guidance, ensuring each participant developed confidence in problem-solving abilities.</p>
            
            <h4>Tools and Equipment Training</h4>
            <p>Participants also learned about:</p>
            <ul>
                <li>Proper selection and maintenance of painting tools</li>
                <li>Equipment troubleshooting and repair basics</li>
                <li>Safety equipment usage and maintenance</li>
                <li>Modern application tools and technologies</li>
            </ul>
            
            <h4>Building Professional Confidence</h4>
            <p>Throughout the day, trainers emphasized building confidence through knowledge. Participants learned that understanding the "why" behind problems makes finding solutions more straightforward and helps prevent issues before they occur.</p>
            
            <h4>Looking Ahead</h4>
            <p>With three days of intensive technical training completed, tomorrow's session will shift focus to professional business practices, customer consultation, and service excellence. The comprehensive training ensures participants are not only technically proficient but also professionally equipped to succeed in the painting industry.</p>
        `
    },
    {
        id: 4,
        title: "Day Two: Mastering Decorative Paint Techniques at Silkcoat Workshop",
        excerpt: "Turkish experts demonstrate advanced decorative painting techniques as Liberian professionals dive deep into the art of creating stunning textured finishes and specialty coatings during the second day of intensive training.",
        category: "Training & Development",
        date: "2025-10-01",
        images: [
            "images/news/news2/day2_1.jpeg",
            "images/news/news2/day2_2.jpeg",
            "images/news/news2/day2_3.png",
            "images/news/news2/day2_4.jpeg"
        ],
        content: `
            <p>The second day of Silkcoat Liberia's professional training workshop on October 1st showcased the artistic side of paint application, with Turkish master craftsmen demonstrating advanced decorative techniques that transform ordinary walls into stunning visual masterpieces.</p>
            
            <h4>Hands-On Decorative Training</h4>
            <p>Today's sessions focused on Silkcoat's premium decorative paint lines, with participants learning to create:</p>
            <ul>
                <li>Metallic finishes using Marmarito and Metalico paint systems</li>
                <li>Pearl and silk effects with Velvetto and Decortivo collections</li>
                <li>Textured applications including Travertino stone effects</li>
                <li>Multi-dimensional finishes that change with lighting conditions</li>
                <li>Color blending and custom shade development techniques</li>
            </ul>
            
            <h4>Turkish Expertise in Action</h4>
            <p>Master trainers with extensive decorative painting experience demonstrated intricate application techniques that captivated participants. Working in small groups, each participant practiced different techniques under direct supervision, allowing for immediate feedback and skill refinement.</p>
            
            <h5>Special Climate Considerations</h5>
            <p>A significant portion of today's training addressed Liberia's tropical climate challenges:</p>
            <ul>
                <li>Humidity management during decorative paint application</li>
                <li>Temperature control for optimal drying and curing</li>
                <li>Surface preparation specific to high-moisture environments</li>
                <li>Long-term maintenance of decorative finishes in tropical conditions</li>
                <li>Protective coatings and sealants for enhanced durability</li>
            </ul>
            
            <h4>Premium Product Applications</h4>
            <p>Participants gained in-depth knowledge of Silkcoat's decorative paint collections:</p>
            <ul>
                <li>Understanding the unique properties of each decorative line</li>
                <li>Proper mixing and application techniques for consistent results</li>
                <li>Tool selection for different decorative effects</li>
                <li>Layering techniques for complex finishes</li>
                <li>Troubleshooting common decorative application challenges</li>
            </ul>
            
            <h4>Participant Experience</h4>
            <p>The hands-on nature of today's training allowed participants to immediately apply new skills. Local painters and Silkcoat staff members worked side-by-side, creating sample boards showcasing various decorative techniques they can later use to demonstrate capabilities to customers.</p>
            
            <h4>Practical Business Applications</h4>
            <p>Beyond technical skills, today's training included valuable business insights:</p>
            <ul>
                <li>Pricing strategies for decorative painting projects</li>
                <li>Customer consultation for decorative applications</li>
                <li>Portfolio development for showcasing decorative work</li>
                <li>Marketing specialized decorative services</li>
                <li>Understanding customer preferences and design trends</li>
            </ul>
            
            <h4>Skill Development Progress</h4>
            <p>With two full days of training completed, participants have built a strong foundation in both fundamental and decorative painting techniques. The progression from basic surface preparation to advanced decorative applications demonstrates the comprehensive nature of the training program.</p>
            
            <h4>Tomorrow's Focus</h4>
            <p>Day three will concentrate on problem-solving, quality control, and advanced troubleshooting techniques. Participants will learn to diagnose and correct common paint application issues while exploring innovative solutions for challenging projects in Liberia's unique climate.</p>
        `
    },
    {
        id: 5,
        title: "Silkcoat Liberia Launches Intensive Five-Day Professional Training Program",
        excerpt: "Turkish paint experts arrive in Monrovia to conduct a comprehensive professional training program for Silkcoat staff and local painters, marking a new chapter in quality paint application standards in Liberia.",
        category: "Training & Development",
        date: "2025-09-30",
        images: [
            "images/news/news1/day1_1.png",
            "images/news/news1/day1_2.jpeg",
            "images/news/news1/day1_3.png",
            "images/news/news1/day1_4.jpeg"
        ],
        content: `
            <p>Silkcoat Liberia commenced an ambitious professional training initiative on September 30th, bringing expert trainers from Turkey to Monrovia. This groundbreaking five-day workshop represents the company's commitment to elevating paint application standards and technical expertise in Liberia's construction industry.</p>
            
            <h4>Comprehensive Training Program Launch</h4>
            <p>The five-day intensive program features:</p>
            <ul>
                <li>Hands-on technical training led by certified Turkish paint application specialists</li>
                <li>Advanced surface preparation techniques for Liberia's tropical climate</li>
                <li>Product knowledge sessions covering Silkcoat's entire paint range</li>
                <li>Best practices in color consultation and customer service</li>
                <li>Safety protocols and environmental compliance standards</li>
                <li>Professional business practices and quality control methods</li>
            </ul>
            
            <h4>Day One: Foundation and Fundamentals</h4>
            <p>The opening day focused on essential surface preparation and primer application:</p>
            <ul>
                <li>Comprehensive surface analysis and assessment techniques</li>
                <li>Proper cleaning and preparation methods for various surfaces</li>
                <li>Understanding moisture content and its impact on paint adhesion</li>
                <li>Primer selection and application for different substrates</li>
                <li>Safety equipment usage and workplace safety protocols</li>
            </ul>
            
            <h4>Building Local Expertise</h4>
            <p>The workshop brings together Silkcoat's dedicated staff members and experienced local painters from across Monrovia. This knowledge transfer initiative aims to create a network of certified professionals who can deliver world-class paint application services throughout Liberia.</p>
            
            <p>CEO Miss Helena Smith emphasized the program's importance: "We're investing in people, not just products. By bringing international expertise to Liberia and sharing our knowledge, we're helping build local capacity for excellence in the construction sector."</p>
            
            <h4>Training Methodology</h4>
            <p>The workshop emphasizes practical, hands-on learning with real-world applications specific to Liberian building materials and environmental conditions. Participants work with actual surfaces and materials they'll encounter in their daily work, ensuring immediate practical application of learned skills.</p>
            
            <h4>Program Structure</h4>
            <p>The five-day intensive curriculum includes:</p>
            <ul>
                <li>Day 1 (September 30): Surface analysis, preparation techniques, and primer application</li>
                <li>Day 2 (October 1): Advanced application methods for decorative and specialty paints</li>
                <li>Day 3 (October 2): Problem-solving, quality control, and troubleshooting</li>
                <li>Day 4 (October 3): Customer consultation and professional business practices</li>
                <li>Day 5 (October 4): Practical assessment and certification ceremony</li>
            </ul>
            
            <h4>Impact on Local Industry</h4>
            <p>This training initiative is expected to significantly impact Liberia's painting industry by establishing standardized quality benchmarks and professional practices. Participants will receive internationally recognized certification upon successful completion of the program.</p>
            
            <h4>Participant Enthusiasm</h4>
            <p>The energy and engagement on day one demonstrated the high level of interest in professional development within Liberia's painting community. Participants expressed appreciation for the opportunity to learn from international experts and gain skills that will enhance their professional capabilities and career prospects.</p>
            
            <h4>Looking Forward</h4>
            <p>As the program continues through October 4th, participants will progress through increasingly advanced topics, culminating in a certification ceremony where they will be recognized as internationally certified paint application professionals. This marks the beginning of Silkcoat Liberia's ongoing commitment to professional development in Liberia's construction sector.</p>
        `
    }
];

// ===== NEWS MANAGER ===== //
const newsManager = {
    currentPage: null,
    currentNewsId: null,
    currentSlide: 0,
    slideInterval: null,

    init() {
        console.log('Initializing News Manager...');
        this.currentPage = this.detectPage();
        console.log('Detected page:', this.currentPage);
        
        if (this.currentPage === 'index') {
            this.loadIndexNews();
        } else if (this.currentPage === 'news') {
            this.setupNewsPage();
        }
    },

    detectPage() {
        const path = window.location.pathname;
        console.log('Current path:', path);
        
        if (path.includes('news.html')) return 'news';
        if (path.includes('index.html') || path === '/' || path === '' || path.endsWith('/')) return 'index';
        return null;
    },

    setupNewsPage() {
        console.log('Setting up news page...');
        
        // Check if there's a news ID in the URL
        const urlParams = new URLSearchParams(window.location.search);
        const newsId = parseInt(urlParams.get('id'));
        
        if (newsId) {
            // Show specific news article
            this.showNewsDetail(newsId);
        } else {
            // Show news grid
            this.showNewsGrid();
        }
        
        // Setup back button
        const backButton = document.getElementById('backToNews');
        if (backButton) {
            backButton.addEventListener('click', () => {
                this.showNewsGrid();
            });
        }
    },

    showNewsGrid() {
        console.log('Showing news grid...');
        
        // Clear URL parameter
        window.history.pushState({}, '', 'news.html');
        
        // Stop any running slideshow
        if (this.slideInterval) {
            clearInterval(this.slideInterval);
        }
        
        // Hide detail section, show grid section
        document.getElementById('newsDetailSection').style.display = 'none';
        document.getElementById('newsGridSection').style.display = 'block';
        document.getElementById('backButtonSection').style.display = 'block';
        
        // Load all news
        this.loadAllNews();
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
    },

    showNewsDetail(newsId) {
        console.log('Showing news detail for ID:', newsId);
        
        const news = newsData.find(n => n.id === newsId);
        if (!news) {
            console.error('News article not found:', newsId);
            this.showNewsGrid();
            return;
        }
        
        // Update URL without reload
        window.history.pushState({}, '', `news.html?id=${newsId}`);
        
        // Hide grid section, show detail section
        document.getElementById('newsGridSection').style.display = 'none';
        document.getElementById('backButtonSection').style.display = 'none';
        document.getElementById('newsDetailSection').style.display = 'block';
        
        // Update page title
        document.title = `${news.title} - Silkcoat | Liberia`;
        
        // Load news detail
        this.currentNewsId = newsId;
        document.getElementById('newsDetailTitle').textContent = news.title;
        document.getElementById('newsDate').innerHTML = `<i class="fas fa-calendar-alt me-2"></i>${this.formatDate(news.date)}`;
        document.getElementById('newsCategory').innerHTML = `<span class="news-category">${news.category}</span>`;
        document.getElementById('newsDetailBody').innerHTML = news.content;
        
        // Load images slideshow
        this.loadNewsSlideshow(news.images);
        
        // Load related news
        this.loadRelatedNews(newsId, news.category);
        
        // Setup share buttons
        this.setupShareButtons(news);
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
        
        console.log('News detail loaded successfully');
    },

    loadIndexNews() {
        console.log('Loading index news...');
        const newsPreviewContainer = document.getElementById('newsPreview');
        if (!newsPreviewContainer) {
            console.error('News preview container not found!');
            return;
        }

        const latestNews = newsData.slice(0, 3);
        newsPreviewContainer.innerHTML = '';

        latestNews.forEach(news => {
            const col = document.createElement('div');
            col.className = 'col-lg-4 col-md-6 mb-4';
            col.innerHTML = `
                <div class="news-card">
                    <div class="news-card-image">
                        <img src="${news.images[0]}" alt="${news.title}" class="img-fluid" onerror="this.src='public/images/marm.png'">
                        <div class="news-category-badge">${news.category}</div>
                    </div>
                    <div class="news-card-content">
                        <div class="news-date">
                            <i class="fas fa-calendar-alt me-2"></i>${this.formatDate(news.date)}
                        </div>
                        <h5 class="news-card-title">${news.title}</h5>
                        <p class="news-card-excerpt">${news.excerpt}</p>
                        <a href="news.html?id=${news.id}" class="btn btn-outline-primary btn-sm">
                            Read More <i class="fas fa-arrow-right ms-2"></i>
                        </a>
                    </div>
                </div>
            `;
            newsPreviewContainer.appendChild(col);
        });
        console.log('Index news loaded successfully');
    },

    loadAllNews() {
        console.log('Loading all news...');
        const newsGrid = document.getElementById('newsGrid');
        if (!newsGrid) {
            console.error('News grid not found!');
            return;
        }

        newsGrid.innerHTML = '';

        newsData.forEach(news => {
            const col = document.createElement('div');
            col.className = 'col-lg-4 col-md-6 mb-4';
            col.innerHTML = `
                <div class="news-card h-100">
                    <div class="news-card-image">
                        <img src="${news.images[0]}" alt="${news.title}" class="img-fluid" onerror="this.src='public/images/marm.png'">
                        <div class="news-category-badge">${news.category}</div>
                    </div>
                    <div class="news-card-content">
                        <div class="news-date">
                            <i class="fas fa-calendar-alt me-2"></i>${this.formatDate(news.date)}
                        </div>
                        <h5 class="news-card-title">${news.title}</h5>
                        <p class="news-card-excerpt">${news.excerpt}</p>
                        <button class="btn btn-outline-primary btn-sm" onclick="newsManager.showNewsDetail(${news.id})">
                            Read More <i class="fas fa-arrow-right ms-2"></i>
                        </button>
                    </div>
                </div>
            `;
            newsGrid.appendChild(col);
        });
        console.log('All news loaded successfully');
    },

    loadNewsSlideshow(images) {
        console.log('Loading slideshow with images:', images);
        const slideshowContainer = document.getElementById('newsSlideshow');
        const dotsContainer = document.getElementById('newsSlideshowDots');
        
        if (!slideshowContainer || !dotsContainer) {
            console.error('Slideshow elements not found');
            return;
        }

        // Stop any existing slideshow
        if (this.slideInterval) {
            clearInterval(this.slideInterval);
        }

        // Clear both containers
        slideshowContainer.innerHTML = '';
        dotsContainer.innerHTML = '';
        this.currentSlide = 0;

        // Add slides first
        images.forEach((image, index) => {
            const slide = document.createElement('div');
            slide.className = `news-slide ${index === 0 ? 'active' : ''}`;
            slide.style.backgroundImage = `url('${image}')`;
            slideshowContainer.appendChild(slide);
        });

        // Add navigation arrows (only if more than 1 image)
        if (images.length > 1) {
            const prevArrow = document.createElement('button');
            prevArrow.className = 'news-slideshow-arrow prev';
            prevArrow.innerHTML = '<i class="fas fa-chevron-left"></i>';
            prevArrow.addEventListener('click', () => {
                this.prevSlide(images.length);
                this.resetSlideshow();
            });
            slideshowContainer.appendChild(prevArrow);

            const nextArrow = document.createElement('button');
            nextArrow.className = 'news-slideshow-arrow next';
            nextArrow.innerHTML = '<i class="fas fa-chevron-right"></i>';
            nextArrow.addEventListener('click', () => {
                this.nextSlide(images.length);
                this.resetSlideshow();
            });
            slideshowContainer.appendChild(nextArrow);
        }

        // Add dots to separate container
        images.forEach((image, index) => {
            const dot = document.createElement('span');
            dot.className = `dot ${index === 0 ? 'active' : ''}`;
            dot.setAttribute('data-slide', index);
            dot.addEventListener('click', () => {
                this.goToSlide(index);
                this.resetSlideshow();
            });
            dotsContainer.appendChild(dot);
        });

        // Start auto-slideshow if more than 1 image
        if (images.length > 1) {
            this.startSlideshow(images.length);
        }
        
        console.log('Slideshow loaded with', images.length, 'images');
    },

    startSlideshow(totalSlides) {
        this.slideInterval = setInterval(() => {
            this.nextSlide(totalSlides);
        }, 4000);
    },

    resetSlideshow() {
        if (this.slideInterval) {
            clearInterval(this.slideInterval);
            const slides = document.querySelectorAll('.news-slide');
            this.startSlideshow(slides.length);
        }
    },

    nextSlide(totalSlides) {
        const nextIndex = (this.currentSlide + 1) % totalSlides;
        this.goToSlide(nextIndex);
    },

    prevSlide(totalSlides) {
        const prevIndex = (this.currentSlide - 1 + totalSlides) % totalSlides;
        this.goToSlide(prevIndex);
    },

    goToSlide(index) {
        const slides = document.querySelectorAll('.news-slide');
        const dots = document.querySelectorAll('.news-slideshow-dots .dot');

        if (slides[this.currentSlide]) {
            slides[this.currentSlide].classList.remove('active');
        }
        if (dots[this.currentSlide]) {
            dots[this.currentSlide].classList.remove('active');
        }

        this.currentSlide = index;

        if (slides[this.currentSlide]) {
            slides[this.currentSlide].classList.add('active');
        }
        if (dots[this.currentSlide]) {
            dots[this.currentSlide].classList.add('active');
        }
    },

    loadRelatedNews(currentNewsId, category) {
        const relatedContainer = document.getElementById('relatedNews');
        if (!relatedContainer) return;

        const related = newsData
            .filter(n => n.id !== currentNewsId && n.category === category)
            .slice(0, 2);

        if (related.length === 0) {
            // If no related news in same category, show latest news
            const latest = newsData.filter(n => n.id !== currentNewsId).slice(0, 2);
            related.push(...latest);
        }

        relatedContainer.innerHTML = '';

        related.forEach(news => {
            const col = document.createElement('div');
            col.className = 'col-md-6 mb-3';
            col.innerHTML = `
                <div class="related-news-card">
                    <img src="${news.images[0]}" alt="${news.title}" class="img-fluid" onerror="this.src='public/images/marm.png'">
                    <div class="related-news-content">
                        <h6>${news.title}</h6>
                        <button class="btn btn-sm btn-outline-primary" onclick="newsManager.showNewsDetail(${news.id})">Read More</button>
                    </div>
                </div>
            `;
            relatedContainer.appendChild(col);
        });
    },

    setupShareButtons(news) {
        const url = encodeURIComponent(window.location.href);
        const title = encodeURIComponent(news.title);

        const facebookBtn = document.getElementById('shareFacebook');
        const twitterBtn = document.getElementById('shareTwitter');
        const whatsappBtn = document.getElementById('shareWhatsapp');
        const linkedinBtn = document.getElementById('shareLinkedin');

        if (facebookBtn) {
            facebookBtn.href = `https://www.facebook.com/sharer/sharer.php?u=${url}`;
        }
        if (twitterBtn) {
            twitterBtn.href = `https://twitter.com/intent/tweet?url=${url}&text=${title}`;
        }
        if (whatsappBtn) {
            whatsappBtn.href = `https://wa.me/?text=${title}%20${url}`;
        }
        if (linkedinBtn) {
            linkedinBtn.href = `https://www.linkedin.com/sharing/share-offsite/?url=${url}`;
        }
    },

    formatDate(dateString) {
        const options = { year: 'numeric', month: 'long', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('en-US', options);
    }
};

// Initialize news manager when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    newsManager.init();
});